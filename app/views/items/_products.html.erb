<table class="table table-stripted products">
  <thead>
    <tr>
      <% if has_enchant?(products) %>
        <th class="enchant">Enchant</th>
      <% end %>
      <th class="count">Count</th>
      <th class="price">Price</th>
      <th class="location">Location</th>
      <th class="player">Player</th>
      <th class="seenTime">Seen Time</th>
    </tr>
  </thead>
  <tbody>
    <% products.each do |p| %>
      <tr>
        <% if has_enchant?(products) %>
          <td>+<%= p.enchant %></td>
        <% end %>
        <td>
          <abbr title="<%= number_with_delimiter p.count, delimiter: ' ' %>">
            <%= number_to_human p.count, units: :common %>
          </abbr>
        </td>
        <td>
          <abbr title="<%= number_with_delimiter p.price, delimiter: ' ' %>">
            <%= number_to_human p.price, units: :common %>
          </abbr>
        </td>
        <td>
          <abbr title="<%= "#{p.shop.location_name}: #{p.shop.coordinates}" %>">
            <%= truncate(p.shop.location_name, length: 10, omission: '..') %>
          </abbr>
        </td>
        <td><%= p.shop.player %></td>
        <td><%= timeago p.shop.seen_time %></td>
      </tr>
    <% end %>
  </tbody>
</table>
